app-id: com.moneytracker.MoneyTracker
runtime: org.freedesktop.Platform
runtime-version: '23.08'
sdk: org.freedesktop.Sdk
command: MoneyTracker
finish-args:
  - --share=network
  - --share=ipc
  - --socket=x11
  - --socket=wayland
  - --filesystem=home:rw
  - --filesystem=xdg-documents:rw
  - --device=dri
  - --talk-name=org.freedesktop.Notifications

modules:
  - name: python3-pip
    buildsystem: simple
    build-commands: []
    modules:
      - name: python3-setuptools
        buildsystem: simple
        build-commands:
          - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}" --prefix=${FLATPAK_DEST} setuptools
        sources:
          - type: file
            url: https://files.pythonhosted.org/packages/fc/c9/775652cd4ce5007b3d3c7ad14e99c9df5de6dd6b2bb99b4e69cb6d7de7c5f/setuptools-69.0.3-py3-none-any.whl
            sha256: 385eb4edd9c9d5c17540511303e39a147ce2fc04bc55289c322b9e5904fe2c05

  - name: python3-flask
    buildsystem: simple
    build-commands:
      - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}" --prefix=${FLATPAK_DEST} Flask
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/36/42/015c23096649b908c809c69c9405b3f7c17a37b8f4e5334580a60a4c6dbce/Flask-3.0.0-py3-none-any.whl
        sha256: 3232e0e9c850d781933cf0207523d1ece087eb8d87b23777ae38456e2fbe7c6e

  - name: python3-pywebview
    buildsystem: simple
    build-commands:
      - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}" --prefix=${FLATPAK_DEST} pywebview
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/d5/ef/5d4b3b8a7bc5e81e7a4f2f8de6b9d8f7c3a2c5a4d85e5e5e5e5e5e5e5e5e/pywebview-4.4.1-py3-none-any.whl
        sha256: placeholder_sha256_replace_with_actual

  - name: MoneyTracker
    buildsystem: simple
    build-commands:
      - install -Dm755 MoneyTracker ${FLATPAK_DEST}/bin/MoneyTracker
      - install -Dm644 com.moneytracker.MoneyTracker.desktop ${FLATPAK_DEST}/share/applications/com.moneytracker.MoneyTracker.desktop
      - install -Dm644 com.moneytracker.MoneyTracker.metainfo.xml ${FLATPAK_DEST}/share/metainfo/com.moneytracker.MoneyTracker.metainfo.xml
    sources:
      - type: file
        path: dist/MoneyTracker
      - type: file
        path: com.moneytracker.MoneyTracker.desktop
      - type: file
        path: com.moneytracker.MoneyTracker.metainfo.xml